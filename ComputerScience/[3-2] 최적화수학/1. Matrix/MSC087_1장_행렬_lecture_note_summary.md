# MSC087 최적화수학 — 1장: 행렬 요약 노트 (재가공)

- 목적: 손필기 내용을 그대로 옮기기보다, 최적화 관점에서 꼭 알아야 할 핵심 개념과 성질을 직관적으로 정리합니다.
- 구성: 정의 → 직관/성질 → 자주 쓰는 공식 → 작은 예시/체크포인트

## 1. 표기와 기본 객체
- 스칼라: 소문자 이탤릭 `a` / 벡터: 굵은 소문자 `x ∈ R^n` / 행렬: 굵은 대문자 `A ∈ R^{m×n}`
- `A = [a_{ij}]`: `i`행 `j`열 원소, `A_i`(i번째 행), `A^j`(j번째 열)
- 단위행렬 `I_n`: 대각 1, 나머지 0 / 영행렬 `0`
- 전치 `A^T`: 행‧열 교환 / 켤레전치 `A^*`(복소)

## 2. 기본 연산과 성질
- 덧셈/스칼라곱: 원소별 연산. 분배법칙, 결합법칙 성립.
- 행렬곱 `C = AB` (정의역: `A ∈ R^{m×k}`, `B ∈ R^{k×n}`):
  - `(AB)_{ij} = Σ_{t=1..k} a_{it} b_{tj}`
  - 일반적으로 교환법칙 성립X (`AB ≠ BA`). 결합/분배는 성립.
- 전치 관련: `(AB)^T = B^T A^T`, `(A^{-1})^T = (A^T)^{-1}` (역 존재 시)
- 트레이스: `tr(A) = Σ a_{ii}`, `tr(AB) = tr(BA)`, 순환성 `tr(ABC) = tr(CAB)`
- 블록행렬: 곱/전치는 모양만 맞으면 동일 규칙로 처리(차원 일치 확인 필수)

## 3. 역행렬과 정칙성
- 역행렬: `A ∈ R^{n×n}`가 가역이면 `A^{-1}` 존재하고 `AA^{-1} = A^{-1}A = I`.
- 등가조건(서로 동치):
  - `A`가 가역 ⇔ `det(A) ≠ 0` ⇔ `rank(A) = n` ⇔ `Ax = 0`의 해가 `x = 0`만 ⇔ 열벡터가 선형독립.
- 실무 체크: `cond_2(A)`(조건수)가 크면 수치적으로 역에 민감(불안정).

## 4. 선형공간과 랭크
- 선형결합/스팬: `span{a_1,..,a_k}`는 생성되는 모든 벡터의 집합.
- 랭크 `rank(A)`: 열공간(또는 행공간) 차원. 선형독립 열의 최대 개수.
- 기본공간: 열공간 `Col(A)`, 영공간 `Null(A)`, 행공간 `Row(A)`.
- 차원정리: `rank(A) + dim(Null(A)) = n` (`A ∈ R^{m×n}`)

## 5. 행렬식(det) 한눈에 보기
- 기하학: 선형변환의 부피 스케일(부호는 방향변화).
- 성질:
  - `det(AB) = det(A) det(B)`, `det(A^T) = det(A)`
  - 행/열 교환 시 부호 반전, 스칼라배 한 행에 `c` 곱 → 전체 `det`에 `c` 곱
  - 삼각행렬 `U/L`: `det(U) = Π u_{ii}`
- 계산 팁: 가우스 소거로 상삼각화 후 대각 원소 곱(행교환/배수에 따른 부호/배율 보정 필수)

## 6. 노름과 거리감
- 벡터 노름: `||x||_1 = Σ|x_i|`, `||x||_2 = sqrt(Σ x_i^2)`, `||x||_∞ = max|x_i|`
- 행렬 노름(대표):
  - 프뢰베니우스 `||A||_F = sqrt(Σ a_{ij}^2)`
  - 스펙트럴 `||A||_2 = σ_max(A)`(최대 특이값)
- 자주 쓰는 부등식: 코시-슈바르츠 `|x^T y| ≤ ||x||_2 ||y||_2`, 삼각부등식, 하 older.

## 7. 양의정(반)정부(PSD/PD)
- 정의(대칭 `A = A^T` 전제):
  - PSD: `x^T A x ≥ 0` ∀x / PD: `x^T A x > 0` ∀x≠0
- 등가조건:
  - `A` 대칭이고 모든 고유값 `λ_i ≥ 0` ⇔ PSD (`>0`이면 PD)
  - 어떤 `B`에 대해 `A = B^T B` ⇔ PSD
- 판별 팁(대칭행렬): 주대각 소행렬식(리딩 principal minors) 모두 > 0 이면 PD.
- 최적화 연결: 이차형식 `f(x)=1/2 x^T A x + b^T x`는 `A`가 PSD면 볼록(convex).

## 8. 고유값/고유벡터와 대각화
- 정의: `Av = λv` (`v ≠ 0`), 고유값 `λ`, 고유벡터 `v`.
- 대칭행렬 핵심:
  - 실고유값만 갖고, 서로 다른 고유값의 고유벡터는 직교.
  - 직교대각화 `A = Q Λ Q^T` (Q는 직교행렬, Λ는 대각에 고유값).
- 스펙트럴 정리 직관: 대칭변환은 직교좌표계를 “늘이고/줄이는” 순수 스케일 조합.

## 9. 특이값분해(SVD)
- 임의(직사각형) 행렬 `A ∈ R^{m×n}`에 대해 `A = U Σ V^T`(U,V 직교, Σ는 대각 비음수).
- 연결고리:
  - `A^T A = V Σ^2 V^T` → 고유값 `= σ_i^2`
  - 랭크 = 0이 아닌 특이값 개수.
- 활용: 차원축소, 최소제곱, 조건수 분석, 저랭크 근사(에크하르트–영 정리).

## 10. 선형시스템과 최소제곱
- 정방, 가역: `Ax=b` → `x = A^{-1} b`.
- 과결정(`m>n`): 최소제곱 `min_x ||Ax-b||_2^2`의 정상방정식: `A^T A x = A^T b`.
  - `A^T A`는 PSD, `rank(A)=n`이면 PD → 해 유일.
  - 투영 관점: 해 `x*`는 `b`를 `Col(A)`에 직교투영한 잔차 `r=b-Ax*`가 `A`의 열공간에 직교.
- 언더(`m<n`): 무한해 → 최소노름해 `x^+ = A^+ b`(무어-펜로즈 의사역행렬)로 대표.

## 11. 미분(자주쓰는 식)
- 스칼라-벡터:
  - `d(a^T x)/dx = a`
  - `d(1/2 ||Ax-b||_2^2)/dx = A^T (Ax-b)`
- 이차형식:
  - 대칭 `A`: `∇(1/2 x^T A x) = A x`
  - 일반 `A`: `∇(x^T A x) = (A + A^T) x`
- 트레이스 활용:
  - `x^T A x = tr(x^T A x) = tr(A x x^T)`
  - `d tr(A^T X)/dX = A`

## 12. 자주 나오는 체크리스트
- 차원 먼저 맞추기: 곱셈 가능 여부(`k` 일치), 결과 차원.
- 대칭/PSD 여부 확인: 이차형식의 부호, 볼록성 판단.
- 조건수와 수치안정성: `A^T A`는 조건수를 악화시킬 수 있음 → QR/SVD 대안 고려.
- 순환성은 트레이스에만: `tr(ABC)=tr(CAB)`이지만 `ABC=CAB`는 아님.
- 교환법칙 없음: 단, 스칼라와는 교환.

## 13. 작은 예시들
- PSD 확인(대칭): `A = [[2,1],[1,2]]`. 고유값 `3,1` → 모두 >0 → PD.
- 최소제곱 직관: `A=[ [1,0],[1,1],[1,2] ], b=[1,2,2]^T`에 대해 `A^T A`와 `A^T b`를 계산 후 `x` 구해보기.
- 스펙트럴/프뢰베니우스: `||A||_2 ≤ ||A||_F`, 동등한 경우는 랭크 1 등 특수 상황.

## 14. 빠른 공식 묶음
- `(AB)^T = B^T A^T`, `det(AB)=det(A)det(B)`, `rank(AB) ≤ min(rank(A),rank(B))`
- `A` 대칭, `A ≻ 0` ⇔ 모든 고유값 > 0 ⇔ `x^T A x > 0 (x≠0)`
- `A = UΣV^T` → `||A||_2 = σ_max`, `||A||_F = sqrt(Σ σ_i^2)`
- 정상방정식: `x* = (A^T A)^{-1} A^T b`(가역 시), 일반적으로는 `x* = A^+ b`

## 15. 학습 로드맵(최적화 관점)
- 필수: 랭크/영공간/열공간, 대칭/PSD, 정상방정식, SVD 기본.
- 심화: 슈어분해, 행렬지수/로그, 크로네커곱, 행렬불등식(Loewner 순서).

---

참고/추천 연습
- 임의의 대칭행렬 2×2, 3×3를 만들어 고유분해/PSD 판정 연습.
- 임의 설계행렬 `A`(m>n)와 `b`를 만들어 최소제곱 해를 직접 계산(QR vs 정상방정식 비교).
- `x^T A x`의 그래디언트를 두 방식(성분/트레이스)으로 유도해 동일함 확인.
